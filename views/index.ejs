<%- include('header.ejs') %>

<div class=" bg-transparent border-dark bg-opacity-50 toastcustom">
  <div class="toast bg-transparent border-dark-subtle bg-opacity-50" role="alert" aria-live="assertive"
    aria-atomic="true">
    <div class="toast-header border-bottom border-dark-subtle">
      <strong class="text-dark me-auto">Error!</strong>
      <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
    </div>
    <div class="toast-body"></div>
  </div>
</div>

<%- include('navbar.ejs') %>

 
<div class="">

    
      <table class="table table-hover ">
        <thead>
          <tr>
            <th class="border-bottom id">id</th>
            <th class="border-bottom name">table</th>
            <th class="border-bottom columns">columns</th>
            <th class="border-bottom records">records</th>
            <th class="border-bottom description">description</th>
            <th class="border-bottom createdat">created</th>
            <th class="border-bottom records">actions</th>
          </tr>
        </thead>
        <tbody>
          <% crudtables.forEach(table => { %>
            <tr>
              <td><%= table.id %></td>
              <td class="table-name ">
                <a href="/tables/<%= table.name %>">
                  <%= table.name %>
                </a>
              </td>
              <td>
                <div class="  "><%= table.columns.length %></div>
                <div class="d-block-inline details border p-2 shadow">
                  <% table.columns.forEach(column => { %>
                    <span><b><%= column.name %></b> <%= column.type %></span><br>
                  <% }) %>
                </div>
              </td>
              <td class=" "><%= table.recordCount %></td>
              <td class="description" dataset="<%= table.description %>">
                <% if (table.description) { %>
                  <%= table.description %>
                <% } else { %>
                  Empty description
                <% } %>
              </td>
              <td class="createdat">
                <%= table.createdat.toLocaleDateString('cs-CZ', { day: 'numeric', month: 'numeric', year: 'numeric' }) %>
              </td>
              <td>
                <a href="/tables/<%= table.name %>" class="link-dark" title="View"><i class="bi bi-eye-fill"></i></a>
                <a href="/tables/<%= table.name %>/delete" class="link-dark" title="Delete"><i class="bi bi-trash"></i></a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
 
    
    

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>

</html>